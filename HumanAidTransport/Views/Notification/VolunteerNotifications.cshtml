@model List<HumanAidTransport.Models.Notification>

@{
    ViewData["Title"] = "Volunteer notifications";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <link rel="stylesheet" href="~/css/notification/volnotif.css" asp-append-version="true" />

</head>
<body>

<h2 class="text-center notification-title">Your notifications</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["ErrorMessage"]
    </div>
}

@if (TempData["TrueMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["TrueMessage"]
    </div>
}

<div class="notification-container">

    @if (Model != null && Model.Any())
{
        <ul>
            @foreach (var notification in Model)
            {
                var statusClass = notification.Status == "Completed" ? "completed" :
                notification.Status == "Rejected" ? "rejected" : notification.Status == "In progress" ? "in-progress" : "default-status";
                <li class="notification-item @statusClass">
                    <div class="notification-content">
                        <span>@notification.Message</span>
                        <small class="notification-date">(@notification.CreatedAt.ToString("yyyy-MM-dd HH:mm"))</small>
                    </div>
                    <div class="notification-actions">
                        <form method="post" asp-action="VolDelete" asp-controller="Notification">
                            <input type="hidden" name="notificationId" value="@notification.Id" />
                            <input type="hidden" name="volunteerId" value="@notification.VolunteerId" />
                            <button type="submit" class="delete-button">Delete</button>
                        </form>

                        @if (notification.Status == "Completed")
                        {
                            <form method="post" asp-action="RateCarrier" asp-controller="Notification">
                                <input type="hidden" name="notificationId" value="@notification.Id" />

                                <input type="range"
                                       id="rating"
                                       name="rating"
                                       min="1"
                                       max="5"
                                       value="3"
                                       oninput="document.getElementById('rating-value').textContent = this.value" />
                                <span id="rating-value">3</span>

                                <button type="submit">
                                    Save Rating
                                </button>
                            </form>

                        }
                    </div>
                </li>
            }
        </ul>
}
else
{
    <p class="no-notifications">You have no new notifications.</p>
}

</div>
</body>
</html>
